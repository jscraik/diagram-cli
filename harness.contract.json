{
  "version": "1.2.0",
  "riskTierRules": {
    "src/diagram.js": "high",
    "src/rules.js": "high",
    "src/graph.js": "high",
    "src/rules/**/*.js": "medium",
    "src/formatters/**/*.js": "medium",
    "src/utils/**/*.js": "low",
    "scripts/**/*.js": "low",
    "**/test*.js": "low"
  },
  "mergePolicy": {
    "high": [
      "review-gate",
      "evidence-verify"
    ],
    "medium": [
      "review-gate"
    ],
    "low": []
  },
  "docsDriftRules": {
    "docs/**/*.md": ["require-review"]
  },
  "reviewPolicy": {
    "timeoutSeconds": 600,
    "timeoutAction": "fail"
  },
  "evidencePolicy": {
    "requiredFor": ["src/diagram.js", "src/rules.js"],
    "allowedTypes": [
      "png",
      "jpeg"
    ],
    "maxFileSizeBytes": 2097152
  },
  "diffBudget": {
    "maxFiles": 8,
    "maxNetLOC": 300,
    "overrideLabel": "diff-budget-override"
  },
  "uiLoopPolicy": {
    "fastCommand": "npm ui:fast",
    "verifyCommand": "npm ui:verify",
    "exploreCommand": "npm ui:explore",
    "sloTargets": {
      "fastLoopSeconds": 30,
      "verifyLoopSeconds": 120
    }
  },
  "runtimePolicy": {
    "nodeVersion": "18.x"
  },
  "memoryPolicy": {
    "enabled": true,
    "provider": "local",
    "sessionIdTemplate": "repo:diagram-cli:task:<id>",
    "domain": "cli-tools",
    "requiredTags": [
      "repo",
      "area",
      "type"
    ],
    "maxObservationsPerStep": 3,
    "allowedLevels": [
      "observation",
      "learning",
      "pattern"
    ],
    "requireStartRead": true,
    "requireCloseoutSummary": true,
    "forbiddenContentPatterns": [
      "token",
      "api[_-]?key",
      "secret",
      "password",
      "credential"
    ]
  },
  "memoryMaintenancePolicy": {
    "validateSchedule": "weekly",
    "reflectSchedule": "weekly",
    "questionSlaDays": 7,
    "duplicateThreshold": 0.8
  },
  "memoryEvalPolicy": {
    "trialsPerTask": 3,
    "requiredMetrics": [
      "pass^k",
      "tool_errors",
      "duplicate_rate"
    ],
    "passPowKThreshold": 0.8
  },
  "observabilityPolicy": {
    "provider": "logs",
    "collectorEndpoint": "http://localhost:4318"
  },
  "packageManagerPolicy": {
    "allowedManagers": [
      "npm"
    ],
    "requiredManager": "npm"
  },
  "remediationPolicy": {
    "providerDefaults": {
      "greptile": {
        "autoApplyMaxTier": "medium",
        "dryRunOnlyByDefault": true
      },
      "codex": {
        "autoApplyMaxTier": "medium",
        "dryRunOnlyByDefault": true
      }
    },
    "marker": "[auto-remediate]",
    "timeoutMinutes": 10,
    "retryLimit": 3,
    "requireEvidence": true
  },
  "pilotGapCasePolicy": {
    "enabled": false,
    "defaultSlaHours": 72,
    "requireClosureEvidence": true,
    "storePath": ".harness/gap-cases.v1.json"
  },
  "pilotRollbackPolicy": {
    "autoTrigger": true,
    "requireManualRelease": true,
    "completionMarkerPath": ".harness/rollback-marker.json",
    "mode": "manual"
  },
  "pilotAuthzPolicy": {
    "githubScopeAllowlist": [
      "pull_requests:write",
      "contents:read",
      "issues:write"
    ],
    "repoAllowlist": [],
    "branchAllowlist": [],
    "protectedBranchDenylist": [
      "main",
      "master",
      "release/*"
    ],
    "enforceBranchProtection": true
  }
}
